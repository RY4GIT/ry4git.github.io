<!DOCTYPE html>
<html>
<head>
    <title>CAMELS Basin Shapes</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
        crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
        crossorigin=""></script>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/shpjs/6.1.0/shp.min.js"></script> -->
    <style>
        #map { height: 600px; }
    </style>
</head>
<body>

<div id="map"></div>

<script>
    // Initialize the map and set its view to some coordinates in the US and zoom level
    var map = L.map('map').setView([39.8283, -98.5795], 4); // Centered on USA

    // Add a tile layer to the map (e.g., OpenStreetMap)
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);

    // Path to your GeoJSON file
    // IMPORTANT: Make sure this is a direct link to the raw GeoJSON file.
    // For GitHub, this usually means clicking "Raw" on the file view and using that URL.
    var geojsonPath = 'REPLACE_WITH_YOUR_DIRECT_GEOJSON_FILE_URL.geojson';

    // Use fetch to load the GeoJSON file
    fetch(geojsonPath)
        .then(response => {
            if (!response.ok) {
                throw new Error('Network response was not ok: ' + response.status + ' ' + response.statusText + ' for ' + geojsonPath);
            }
            return response.json(); // This parses the response body as JSON
        })
        .then(function(data) { // 'data' here is the parsed GeoJSON object
            if (data) {
                L.geoJSON(data, { // Leaflet's L.geoJSON directly uses the GeoJSON object
                    onEachFeature: function (feature, layer) {
                        // You can access properties from the GeoJSON feature.properties
                        if (feature.properties && feature.properties.BASIN_ID) {
                            layer.bindPopup('Basin ID: ' + feature.properties.BASIN_ID);
                        } else if (feature.properties) {
                            // If BASIN_ID is not present, show all properties
                            let popupContent = '<pre>';
                            for (const key in feature.properties) {
                                popupContent += `${key}: ${feature.properties[key]}\n`;
                            }
                            popupContent += '</pre>';
                            layer.bindPopup(popupContent);
                        }
                    }
                }).addTo(map);
                console.log("GeoJSON loaded and added to map:", data);
            } else {
                console.error("Could not load or parse GeoJSON. Data is null or undefined after fetch.");
                alert("Could not load or parse GeoJSON. Data is null or undefined. Check console for details.");
            }
        })
        .catch(function(error) {
            console.error("Error loading or processing GeoJSON:", error);
            alert("Error loading GeoJSON. Check the console for details. Ensure the URL is correct, accessible, and points to a valid GeoJSON file: " + geojsonPath + "\nError: " + error.message);
        });

</script>

</body>
</html>
